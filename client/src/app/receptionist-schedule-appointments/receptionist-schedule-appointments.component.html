<app-dashbaord></app-dashbaord>
<div *ngIf="successMessage" class="alert alert-success mt-4" role="alert">
  {{ successMessage }}
</div>
<div *ngIf="errorMessage" class="alert alert-danger mt-4" role="alert">
  {{ errorMessage }}
</div>
<div  class="card">
    <div class="card-header">
        <h4>Scheduled Appointment</h4>
    </div>
        <div class="card-body">
            <form class="mb-3 mt-md-4" [formGroup]="itemForm" (ngSubmit)="onSubmit()">
              
              <div class="mb-3">
                  <label for="time" class="form-label ">PatientId</label>
                  <input type="number" class="form-control" placeholder="patientId" formControlName="patientId">
                  <div *ngIf="itemForm.controls['patientId'].invalid && itemForm.controls['patientId'].touched" class="ng-dirty">
                    <span *ngIf="itemForm.controls['patientId'].errors">
                      <span class="text-danger">Please Enter patientId .</span>
                    </span>
                  </div>
                </div>
                <div class="col-md-6">
                  <label for="doctorId" class="form-label fw-bold">
                    <span style="color:red">*</span> Select Doctor
                  </label>
                  <select id="doctorId" class="form-select" formControlName="doctorId"
                    [ngClass]="{'is-invalid': f['doctorId'].invalid && f['doctorId'].touched}">
                    <option value="">-- Choose Doctor --</option>
                    <option *ngFor="let doctor of availableDoctors" [value]="doctor.id">
                      {{ doctor.username }} ({{ doctor.specialty }})
                    </option>
                  </select>
                  <div *ngIf="f['doctorId'].invalid && f['doctorId'].touched" class="invalid-feedback">
                    <small *ngIf="f['doctorId'].errors?.['required']">Doctor selection is required.</small>
                  </div>
                </div>
                <br>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="appointmentDate" class="form-label fw-bold">
                      <span style="color:red">*</span> Date
                    </label>
                    <input id="appointmentDate" type="date" class="form-control" formControlName="appointmentDate"
                      [attr.min]="today"
                      [ngClass]="{'is-invalid': f['appointmentDate'].invalid && f['appointmentDate'].touched}" />
                    <div *ngIf="f['appointmentDate'].invalid && f['appointmentDate'].touched" class="invalid-feedback">
                      <small *ngIf="f['appointmentDate'].errors?.['required']">Date is required.</small>
                    </div>
                  </div>
        
                  <div class="col-md-6">
                    <label for="time" class="form-label fw-bold">
                      <span style="color:red">*</span> Time
                    </label>
                    <input id="time" type="time" class="form-control" formControlName="time"
                      [disabled]="!f['appointmentDate'].value"
                      [attr.min]="f['appointmentDate'].value === today ? currentTime : null"
                      [ngClass]="{'is-invalid': f['time'].invalid && f['time'].touched}" />
                    <div *ngIf="f['time'].invalid && f['time'].touched" class="invalid-feedback">
                      <small *ngIf="f['time'].errors?.['required']">Time is required.</small>
                    </div>
                </div>
              </div>
               

                <div class="col-md-2">
                  <button class="btn btn-outline-dark" type="submit">Submit</button>
                </div>
              </form>
        </div>
   
</div>
